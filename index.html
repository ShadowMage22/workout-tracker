<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#222222" />
  <link rel="manifest" href="./manifest.json" />
  <title>3-Day Beginner Strength Training</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Arial, sans-serif;
      margin: 0;
      padding: 12px;
      background: #f2f2f2;
      line-height: 1.5;
    }
    h1 { font-size: 1.4rem; margin-bottom: 8px; }
    h2 { font-size: 1.2rem; margin-top: 0; }
    h3 { font-size: 1rem; margin-bottom: 6px; }

    .install-prompt {
      background: #4a6fd6;
      color: white;
      padding: 12px;
      border-radius: 10px;
      margin-bottom: 12px;
      display: none;
      align-items: center;
      gap: 10px;
    }
    .install-prompt.show { display: flex; }
    .install-prompt button {
      background: white;
      color: #4a6fd6;
      border: none;
      padding: 8px 16px;
      border-radius: 6px;
      font-weight: 600;
      margin-left: auto;
    }
    .install-prompt .close-install {
      background: transparent;
      color: white;
      padding: 4px 8px;
      margin-left: 0;
      font-size: 1.2rem;
    }

    .tabs { display: flex; gap: 8px; margin-bottom: 12px; }
    .tab { flex: 1; padding: 10px; border-radius: 10px; border: none; background: #ddd; font-weight: 600; }
    .tab.active { background: #222; color: #fff; }

    .day { display: none; background: #ffffff; border-radius: 14px; padding: 14px; box-shadow: 0 4px 10px rgba(0,0,0,0.08); }
    .day.active { display: block; }

    .section { margin-bottom: 14px; }
    ul { list-style: none; padding-left: 0; margin: 0; }
    li { margin-bottom: 12px; }

    label { display: flex; gap: 10px; align-items: flex-start; transition: opacity 0.2s; }
    input[type="checkbox"] { margin-top: 6px; transform: scale(1.3); }

    input[type="checkbox"]:checked ~ .exercise-name,
    input[type="checkbox"]:checked ~ span:not(.exercise-name) {
      opacity: 0.5;
      text-decoration: line-through;
    }

    label:has(input[type="checkbox"]:checked) {
      opacity: 0.6;
    }

    .exercise { display: flex; gap: 10px; align-items: flex-start; }
    .svg-wrap { 
      width: 56px; 
      height: 56px; 
      border-radius: 12px; 
      background: #f0f0f0; 
      flex-shrink: 0; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      cursor: pointer; 
    }

    .exercise-visual {
      width: 80px;
      height: 80px;
      border-radius: 12px;
      background: #f0f0f0;
      flex-shrink: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      overflow: hidden;
      position: relative;
      border: 2px solid #e0e0e0;
    }

    .exercise-visual img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .exercise-visual .placeholder {
      font-size: 2rem;
      color: #ccc;
    }

    .expand-hint {
      position: absolute;
      bottom: 4px;
      right: 4px;
      background: rgba(0,0,0,0.6);
      color: white;
      border-radius: 50%;
      width: 20px;
      height: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 12px;
      pointer-events: none;
    }

    .variants-toggle { font-size: 0.75rem; color: #0066cc; cursor: pointer; margin-left: 76px; margin-top: 4px; }
    .exercise-variants { display: none; margin-left: 76px; margin-top: 6px; border-left: 2px solid #ddd; padding-left: 8px; }
    .exercise-variants.active { display: block; }
    .variant-option { font-size: 0.8rem; margin-bottom: 6px; cursor: pointer; }
    .variant-option span { color: #666; font-size: 0.75rem; }
    .variant-option.selected { font-weight: bold; color: #d64545; }

    svg { width: 44px; height: 44px; }
    .primary { fill: #d64545; stroke: #d64545; }
    .secondary { fill: #4a6fd6; stroke: #4a6fd6; }
    .movement { stroke-dasharray: 4 2; }

    .instructions { font-size: 0.85rem; color: #444; margin-left: 76px; }
    
    .video-link {
      margin-left: 76px;
      margin-top: 6px;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
      color: #0066cc;
      text-decoration: none;
      padding: 4px 8px;
      border-radius: 6px;
      background: #f0f7ff;
      transition: background 0.2s;
    }

    .video-link:hover {
      background: #e3f2fd;
    }

    .video-link::before {
      content: '‚ñ∂';
      font-size: 0.7rem;
    }

    button.clear { width: 100%; padding: 10px; font-size: 0.95rem; border: none; border-radius: 10px; background: #222; color: #fff; margin-top: 10px; }

    .overlay { position: fixed; inset: 0; background: rgba(0,0,0,0.85); display: none; align-items: center; justify-content: center; z-index: 1000; }
    .overlay.active { display: flex; }
    .overlay img {
      width: 90vw;
      max-width: 400px;
      height: auto;
      background: #fff;
      border-radius: 16px;
      padding: 16px;
    }
    .overlay svg { width: 80vw; height: 80vw; max-width: 360px; max-height: 360px; background: #fff; border-radius: 16px; padding: 16px; }
    .overlay .close { position: absolute; top: 16px; right: 16px; font-size: 1.4rem; color: #fff; cursor: pointer; }
  </style>
</head>
<body>

<div class="install-prompt" id="installPrompt">
  <button class="close-install" onclick="hideInstallPrompt()">&times;</button>
  <span>Install this app for easy access</span>
  <button onclick="installApp()">Install</button>
</div>

<div id="svgOverlay" class="overlay" onclick="closeOverlay()">
  <div class="close">&times;</div>
  <div id="overlayContent"></div>
</div>

<h1>3-Day Beginner Strength Training</h1>
<p style="font-size:0.85rem">Each workout ‚âà 45 minutes: 5‚Äì7 min warm-up, 30‚Äì32 min strength + core, 5‚Äì6 min cooldown.</p>
<p style="font-size:0.75rem; color:#999; text-align:center; margin-top:4px;">v2.1 ‚Äî Updated January 2026</p>

<div class="tabs">
  <button class="tab active" onclick="showDay('push', this)">Push</button>
  <button class="tab" onclick="showDay('pull', this)">Pull</button>
  <button class="tab" onclick="showDay('legs', this)">Legs</button>
</div>

<div class="day active" id="push">
  <h2>Push Day</h2>

  <div class="section warmup">
    <h3>Warm-Up (8 minutes)</h3>
    <ul>
      <li><label><input type="checkbox" /><span>Light cardio (walk/bike) ‚Äî 2 min</span></label></li>
      <li><label><input type="checkbox" /><span>Arm circles + band pull-aparts ‚Äî 3 min</span></label></li>
      <li><label><input type="checkbox" /><span>Warm-up sets for first two lifts ‚Äî 3 min</span></label></li>
    </ul>
  </div>

  <div class="section">
    <h3>Strength + Core (‚âà35 minutes)</h3>
    <ul>
      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="flat-bench-press" onclick="expandImage(event, '')">
            <img src="" alt="Flat Bench Press" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Flat Bench Press ‚Äî 3√ó8‚Äì10</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó8‚Äì10<br><strong>Rest:</strong> 60‚Äì90 sec<br><strong>Time:</strong> ~6‚Äì7 min<br><strong>Targets:</strong> Chest, shoulders, triceps<br>Press dumbbells up from chest level.</div>
        <a href="#" data-media-key="flat-bench-press" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Flat Bench Press ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Chest, shoulders, triceps | Press dumbbells up from chest level." data-media-key="flat-bench-press">Flat Bench Press <span>(chest, front delts, triceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Push-Ups ‚Äî 3√ó10‚Äì15" data-instructions="Sets/Reps: 3√ó10‚Äì15 | Rest: 60 sec | Time: ~6 min | Targets: Chest, shoulders, triceps | Lower chest to floor and press up with control." data-media-key="push-ups">Push-Ups <span>(chest, front delts, triceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Chest Fly ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 60 sec | Time: ~6 min | Targets: Chest, shoulders | Arc arms out and bring together over chest." data-media-key="chest-fly">Chest Fly <span>(chest isolation, front delts)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="overhead-press" onclick="expandImage(event, '')">
            <img src="" alt="Overhead Press" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Overhead Press ‚Äî 3√ó8‚Äì10</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó8‚Äì10<br><strong>Rest:</strong> 60‚Äì90 sec<br><strong>Time:</strong> ~6‚Äì7 min<br><strong>Targets:</strong> Shoulders, triceps<br>Press dumbbells overhead from shoulder height.</div>
        <a href="#" data-media-key="overhead-press" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Overhead Press ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Shoulders, triceps | Press dumbbells overhead from shoulder height." data-media-key="overhead-press">Overhead Press <span>(shoulders, triceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Arnold Press ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Shoulders, triceps | Rotate palms from facing you to facing forward while pressing." data-media-key="arnold-press">Arnold Press <span>(shoulders, triceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Landmine Press ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Shoulders, triceps | Press barbell end diagonally overhead." data-media-key="landmine-press">Landmine Press <span>(shoulders, triceps, core)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="incline-press" onclick="expandImage(event, '')">
            <img src="" alt="Incline Press" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Incline Press ‚Äî 3√ó10</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó10<br><strong>Rest:</strong> 60‚Äì90 sec<br><strong>Time:</strong> ~6‚Äì7 min<br><strong>Targets:</strong> Upper chest, front delts<br>Press dumbbells up at 30-45 degree angle.</div>
        <a href="#" data-media-key="incline-press" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Incline Press ‚Äî 3√ó10" data-instructions="Sets/Reps: 3√ó10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Upper chest, front delts | Press dumbbells up at 30-45 degree angle." data-media-key="incline-press">Incline Press <span>(upper chest, front delts)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Incline Fly ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 60 sec | Time: ~6 min | Targets: Upper chest, front delts | Arc dumbbells out and together on incline bench." data-media-key="incline-fly">Incline Fly <span>(upper chest, front delts)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Low-to-High Cable Fly ‚Äî 3√ó12" data-instructions="Sets/Reps: 3√ó12 | Rest: 60 sec | Time: ~6 min | Targets: Upper chest, front delts | Pull cables from low to high across body." data-media-key="cable-fly">Low-to-High Cable Fly <span>(upper chest, front delts)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="tricep-pushdown" onclick="expandImage(event, '')">
            <img src="" alt="Tricep Pushdown" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Tricep Pushdown ‚Äî 3√ó10‚Äì12</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó10‚Äì12<br><strong>Rest:</strong> 45‚Äì60 sec<br><strong>Time:</strong> ~5‚Äì6 min<br><strong>Targets:</strong> Triceps<br>Press cable down keeping elbows at sides.</div>
        <a href="#" data-media-key="tricep-pushdown" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Tricep Pushdown ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Triceps | Press cable down keeping elbows at sides." data-media-key="tricep-pushdown">Tricep Pushdown <span>(triceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Overhead Tricep Extension ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Triceps | Lower dumbbell behind head and extend upward." data-media-key="overhead-tricep-ext">Overhead Tricep Extension <span>(triceps, long head focus)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Close-Grip Push-Ups ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Triceps | Hands close together, lower and press emphasizing triceps." data-media-key="close-grip-pushup">Close-Grip Push-Ups <span>(triceps, chest)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="plank" onclick="expandImage(event, '')">
            <img src="" alt="Plank" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Plank ‚Äî 2√ó30 sec</span>
        </div>
        <div class="instructions"><strong>Rest:</strong> 30 sec<br><strong>Time:</strong> ~4 min<br><strong>Targets:</strong> Core, shoulders<br>Hold straight body line on forearms.</div>
        <a href="#" data-media-key="plank" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Plank ‚Äî 2√ó30 sec" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Core, shoulders | Hold straight body line on forearms." data-media-key="plank">Plank <span>(core, shoulders)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Mountain Climbers ‚Äî 2√ó20 sec" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Core, shoulders | Alternate driving knees to chest from plank position." data-media-key="mountain-climbers">Mountain Climbers <span>(core, shoulders, cardio)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Ab Wheel Rollout ‚Äî 2√ó8‚Äì10" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Core, shoulders | Roll wheel forward and pull back with control." data-media-key="ab-wheel">Ab Wheel Rollout <span>(core, shoulders, lats)</span></div>
        </div>
      </li>
    </ul>
  </div>

  <div class="section cooldown">
    <h3>Cooldown (5 minutes)</h3>
    <ul>
      <li><label><input type="checkbox" /><span>Chest stretch ‚Äî 30s/side</span></label></li>
      <li><label><input type="checkbox" /><span>Shoulder stretch ‚Äî 30s/side</span></label></li>
      <li><label><input type="checkbox" /><span>Breathing ‚Äî 1‚Äì2 min</span></label></li>
    </ul>
  </div>

  <button class="clear" onclick="clearChecks('push')">Clear Push Day</button>
</div>

<div class="day" id="pull">
  <h2>Pull Day</h2>

  <div class="section warmup">
    <h3>Warm-Up (8 minutes)</h3>
    <ul>
      <li><label><input type="checkbox" /><span>Light cardio (walk/row/bike) ‚Äî 2 min</span></label></li>
      <li><label><input type="checkbox" /><span>Band pull-aparts + arm circles ‚Äî 3 min</span></label></li>
      <li><label><input type="checkbox" /><span>Warm-up sets for first two lifts ‚Äî 3 min</span></label></li>
    </ul>
  </div>

  <div class="section">
    <h3>Strength + Core (‚âà35 minutes)</h3>
    <ul>
      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="cable-row" onclick="expandImage(event, '')">
            <img src="" alt="Seated Cable Row" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Seated Cable Row ‚Äî 3√ó8‚Äì10</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó8‚Äì10<br><strong>Rest:</strong> 60‚Äì90 sec<br><strong>Time:</strong> ~6‚Äì7 min<br><strong>Targets:</strong> Mid back, lats, biceps<br>Pull handle to ribs squeezing shoulder blades.</div>
        <a href="#" data-media-key="cable-row" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Seated Cable Row ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Mid back, lats, biceps | Pull handle to ribs squeezing shoulder blades." data-media-key="cable-row">Seated Cable Row <span>(mid back, lats, biceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Dumbbell Row ‚Äî 3√ó8‚Äì10/side" data-instructions="Sets/Reps: 3√ó8‚Äì10/side | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Mid back, lats, biceps | Pull dumbbell to hip with flat back, one arm at a time." data-media-key="dumbbell-row">Dumbbell Row <span>(mid back, lats, biceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Bent-Over Barbell Row ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Mid back, lats, biceps | Hinge forward and pull barbell to lower chest." data-media-key="barbell-row">Bent-Over Barbell Row <span>(mid back, lats, biceps, core)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="lat-pulldown" onclick="expandImage(event, '')">
            <img src="" alt="Lat Pulldown" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Lat Pulldown ‚Äî 3√ó8‚Äì10</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó8‚Äì10<br><strong>Rest:</strong> 60‚Äì90 sec<br><strong>Time:</strong> ~6‚Äì7 min<br><strong>Targets:</strong> Lats, upper back, biceps<br>Pull bar to upper chest keeping torso upright.</div>
        <a href="#" data-media-key="lat-pulldown" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Lat Pulldown ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Lats, upper back, biceps | Pull bar to upper chest keeping torso upright." data-media-key="lat-pulldown">Lat Pulldown <span>(lats, upper back, biceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Pull-Ups ‚Äî 3√ó5‚Äì8" data-instructions="Sets/Reps: 3√ó5‚Äì8 | Rest: 90 sec | Time: ~6‚Äì7 min | Targets: Lats, upper back, biceps | Pull chin over bar with controlled movement." data-media-key="pull-ups">Pull-Ups <span>(lats, upper back, biceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Straight-Arm Pulldown ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 60 sec | Time: ~6 min | Targets: Lats, upper back | Pull cable down with straight arms focusing on lats." data-media-key="straight-arm-pulldown">Straight-Arm Pulldown <span>(lats isolation, upper back)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="face-pulls" onclick="expandImage(event, '')">
            <img src="" alt="Face Pulls" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Face Pulls ‚Äî 3√ó12‚Äì15</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó12‚Äì15<br><strong>Rest:</strong> 45‚Äì60 sec<br><strong>Time:</strong> ~5‚Äì6 min<br><strong>Targets:</strong> Rear delts, upper back<br>Pull rope to face separating handles at end.</div>
        <a href="#" data-media-key="face-pulls" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Face Pulls ‚Äî 3√ó12‚Äì15" data-instructions="Sets/Reps: 3√ó12‚Äì15 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Rear delts, upper back | Pull rope to face separating handles at end." data-media-key="face-pulls">Face Pulls <span>(rear delts, upper back)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Reverse Fly ‚Äî 3√ó12‚Äì15" data-instructions="Sets/Reps: 3√ó12‚Äì15 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Rear delts, upper back | Bend forward and pull dumbbells out to sides." data-media-key="reverse-fly">Reverse Fly <span>(rear delts, upper back)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Wide-Grip Upright Row ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 60 sec | Time: ~5‚Äì6 min | Targets: Rear delts, upper back | Pull barbell up to chest with wide grip." data-media-key="upright-row">Wide-Grip Upright Row <span>(rear delts, upper back, traps)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="bicep-curls" onclick="expandImage(event, '')">
            <img src="" alt="Bicep Curls" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Bicep Curls ‚Äî 3√ó10‚Äì12</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó10‚Äì12<br><strong>Rest:</strong> 45‚Äì60 sec<br><strong>Time:</strong> ~5‚Äì6 min<br><strong>Targets:</strong> Biceps<br>Curl dumbbells up keeping elbows stationary.</div>
        <a href="#" data-media-key="bicep-curls" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Bicep Curls ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Biceps | Curl dumbbells up keeping elbows stationary." data-media-key="bicep-curls">Dumbbell Bicep Curls <span>(biceps)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Hammer Curls ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Biceps | Curl with palms facing each other, neutral grip." data-media-key="hammer-curls">Hammer Curls <span>(biceps, brachialis, forearms)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Cable Curls ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Biceps | Curl cable attachment with constant tension." data-media-key="cable-curls">Cable Curls <span>(biceps, constant tension)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="dead-bug" onclick="expandImage(event, '')">
            <img src="" alt="Dead Bug" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Dead Bug ‚Äî 2√ó8/side</span>
        </div>
        <div class="instructions"><strong>Rest:</strong> 30 sec<br><strong>Time:</strong> ~4 min<br><strong>Targets:</strong> Core, hip flexors<br>Extend opposite arm and leg while bracing core.</div>
        <a href="#" data-media-key="dead-bug" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Dead Bug ‚Äî 2√ó8/side" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Core, hip flexors | Extend opposite arm and leg while bracing core." data-media-key="dead-bug">Dead Bug <span>(core, hip flexors)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Bird Dog ‚Äî 2√ó8/side" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Core, hip flexors | From hands and knees, extend opposite arm and leg." data-media-key="bird-dog">Bird Dog <span>(core, lower back, balance)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Hollow Body Hold ‚Äî 2√ó20‚Äì30 sec" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Core, hip flexors | Hold body in hollow position with lower back pressed down." data-media-key="hollow-body">Hollow Body Hold <span>(core, hip flexors)</span></div>
        </div>
      </li>
    </ul>
  </div>

  <div class="section cooldown">
    <h3>Cooldown (5 minutes)</h3>
    <ul>
      <li><label><input type="checkbox" /><span>Lat stretch ‚Äî 30s/side</span></label></li>
      <li><label><input type="checkbox" /><span>Upper-back stretch ‚Äî 30s</span></label></li>
      <li><label><input type="checkbox" /><span>Breathing ‚Äî 1‚Äì2 min</span></label></li>
    </ul>
  </div>

  <button class="clear" onclick="clearChecks('pull')">Clear Pull Day</button>
</div>

<div class="day" id="legs">
  <h2>Legs Day</h2>

  <div class="section warmup">
    <h3>Warm-Up (8 minutes)</h3>
    <ul>
      <li><label><input type="checkbox" /><span>Light cardio (walk/bike) ‚Äî 2 min</span></label></li>
      <li><label><input type="checkbox" /><span>Hip circles + leg swings ‚Äî 3 min</span></label></li>
      <li><label><input type="checkbox" /><span>Warm-up sets for first two lifts ‚Äî 3 min</span></label></li>
    </ul>
  </div>

  <div class="section">
    <h3>Strength + Core (‚âà35 minutes)</h3>
    <ul>
      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="goblet-squat" onclick="expandImage(event, '')">
            <img src="" alt="Goblet Squat" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Goblet Squat ‚Äî 3√ó8‚Äì10</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó8‚Äì10<br><strong>Rest:</strong> 60‚Äì90 sec<br><strong>Time:</strong> ~6‚Äì7 min<br><strong>Targets:</strong> Quads, glutes, core<br>Sit hips back and down while keeping chest tall.</div>
        <a href="#" data-media-key="goblet-squat" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Goblet Squat ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Quads, glutes, core | Sit hips back and down while keeping chest tall." data-media-key="goblet-squat">Goblet Squat <span>(quads, glutes, core)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Barbell Back Squat ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 90 sec | Time: ~7 min | Targets: Quads, glutes, core | Squat with bar on upper back, full depth." data-media-key="back-squat">Barbell Back Squat <span>(quads, glutes, core)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Leg Press ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Quads, glutes | Press platform away with controlled depth." data-media-key="leg-press">Leg Press <span>(quads, glutes)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="rdl" onclick="expandImage(event, '')">
            <img src="" alt="Romanian Deadlift" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Romanian Deadlift ‚Äî 3√ó8‚Äì10</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó8‚Äì10<br><strong>Rest:</strong> 60‚Äì90 sec<br><strong>Time:</strong> ~6‚Äì7 min<br><strong>Targets:</strong> Hamstrings, glutes, lower back<br>Hinge at hips keeping back neutral.</div>
        <a href="#" data-media-key="rdl" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Romanian Deadlift ‚Äî 3√ó8‚Äì10" data-instructions="Sets/Reps: 3√ó8‚Äì10 | Rest: 60‚Äì90 sec | Time: ~6‚Äì7 min | Targets: Hamstrings, glutes, lower back | Hinge at hips keeping back neutral." data-media-key="rdl">Romanian Deadlift <span>(hamstrings, glutes, lower back)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Leg Curl ‚Äî 3√ó10‚Äì12" data-instructions="Sets/Reps: 3√ó10‚Äì12 | Rest: 60 sec | Time: ~6 min | Targets: Hamstrings, glutes | Curl legs up while lying or seated on machine." data-media-key="leg-curl">Leg Curl <span>(hamstrings isolation)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Good Mornings ‚Äî 3√ó10" data-instructions="Sets/Reps: 3√ó10 | Rest: 60‚Äì90 sec | Time: ~6 min | Targets: Hamstrings, glutes, lower back | Hinge forward with bar on shoulders and return upright." data-media-key="good-mornings">Good Mornings <span>(hamstrings, glutes, lower back)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="bulgarian-split" onclick="expandImage(event, '')">
            <img src="" alt="Bulgarian Split Squat" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Bulgarian Split Squat ‚Äî 3√ó8/side</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó8/side<br><strong>Rest:</strong> 60‚Äì90 sec<br><strong>Time:</strong> ~7‚Äì8 min<br><strong>Targets:</strong> Quads, glutes, balance<br>Lower back knee toward ground with front leg forward.</div>
        <a href="#" data-media-key="bulgarian-split" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Bulgarian Split Squat ‚Äî 3√ó8/side" data-instructions="Sets/Reps: 3√ó8/side | Rest: 60‚Äì90 sec | Time: ~7‚Äì8 min | Targets: Quads, glutes, balance | Lower back knee toward ground with front leg forward." data-media-key="bulgarian-split">Bulgarian Split Squat <span>(quads, glutes, balance)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Walking Lunges ‚Äî 3√ó10/side" data-instructions="Sets/Reps: 3√ó10/side | Rest: 60 sec | Time: ~6‚Äì7 min | Targets: Quads, glutes, balance | Step forward into lunge, alternating legs." data-media-key="walking-lunges">Walking Lunges <span>(quads, glutes, balance)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Step-Ups ‚Äî 3√ó10/side" data-instructions="Sets/Reps: 3√ó10/side | Rest: 60 sec | Time: ~6‚Äì7 min | Targets: Quads, glutes, balance | Step up onto bench driving through front leg." data-media-key="step-ups">Step-Ups <span>(quads, glutes, balance)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="calf-raises" onclick="expandImage(event, '')">
            <img src="" alt="Calf Raises" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Calf Raises ‚Äî 3√ó12‚Äì15</span>
        </div>
        <div class="instructions"><strong>Sets/Reps:</strong> 3√ó12‚Äì15<br><strong>Rest:</strong> 45‚Äì60 sec<br><strong>Time:</strong> ~5‚Äì6 min<br><strong>Targets:</strong> Calves<br>Rise up on toes and lower with control.</div>
        <a href="#" data-media-key="calf-raises" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Calf Raises ‚Äî 3√ó12‚Äì15" data-instructions="Sets/Reps: 3√ó12‚Äì15 | Rest: 45‚Äì60 sec | Time: ~5‚Äì6 min | Targets: Calves | Rise up on toes and lower with control." data-media-key="calf-raises">Standing Calf Raise <span>(calves - gastrocnemius focus)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Seated Calf Raise ‚Äî 3√ó15‚Äì20" data-instructions="Sets/Reps: 3√ó15‚Äì20 | Rest: 45 sec | Time: ~5 min | Targets: Calves | Seated position, raise heels with weight on knees." data-media-key="seated-calf">Seated Calf Raise <span>(calves - soleus focus)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Single-Leg Calf Raise ‚Äî 3√ó10‚Äì12/side" data-instructions="Sets/Reps: 3√ó10‚Äì12/side | Rest: 45 sec | Time: ~6 min | Targets: Calves | Rise on one leg at a time for balance and strength." data-media-key="single-calf">Single-Leg Calf Raise <span>(calves, balance)</span></div>
        </div>
      </li>

      <li>
        <div class="exercise">
          <label>
            <input type="checkbox" />
          </label>
          <div class="exercise-visual" data-media-key="side-plank" onclick="expandImage(event, '')">
            <img src="" alt="Side Plank" />
            <div class="expand-hint">üîç</div>
          </div>
          <span class="exercise-name">Side Plank ‚Äî 2√ó20s/side</span>
        </div>
        <div class="instructions"><strong>Rest:</strong> 30 sec<br><strong>Time:</strong> ~4 min<br><strong>Targets:</strong> Obliques, core stability<br>Keep body in straight line on side.</div>
        <a href="#" data-media-key="side-plank" target="_blank" class="video-link" rel="noopener noreferrer">Watch Form Tutorial</a>
        <div class="variants-toggle" onclick="toggleVariants(this)">Change exercise (same muscles)</div>
        <div class="exercise-variants">
          <div class="variant-option selected" onclick="selectVariant(this)" data-name="Side Plank ‚Äî 2√ó20s/side" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Obliques, core stability | Keep body in straight line on side." data-media-key="side-plank">Side Plank <span>(obliques, core stability)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Pallof Press ‚Äî 2√ó10/side" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Obliques, core stability | Press cable straight out resisting rotation." data-media-key="pallof-press">Pallof Press <span>(obliques, anti-rotation)</span></div>
          <div class="variant-option" onclick="selectVariant(this)" data-name="Russian Twists ‚Äî 2√ó20 (10/side)" data-instructions="Rest: 30 sec | Time: ~4 min | Targets: Obliques, core stability | Rotate torso side to side holding weight." data-media-key="russian-twists">Russian Twists <span>(obliques, rotational core)</span></div>
        </div>
      </li>
    </ul>
  </div>

  <div class="section cooldown">
    <h3>Cooldown (5 minutes)</h3>
    <ul>
      <li><label><input type="checkbox" /><span>Hamstring stretch ‚Äî 30s/side</span></label></li>
      <li><label><input type="checkbox" /><span>Quad stretch ‚Äî 30s/side</span></label></li>
      <li><label><input type="checkbox" /><span>Breathing ‚Äî 1‚Äì2 min</span></label></li>
    </ul>
  </div>

  <button class="clear" onclick="clearChecks('legs')">Clear Legs Day</button>
</div>

<script>
let deferredPrompt;

// Centralized exercise media database
const exerciseMedia = {
  // Push Day
  'flat-bench-press': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Bench',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Bench+Press+GIF',
    video: 'https://www.youtube.com/watch?v=VmB1G1K7v94'
  },
  'push-ups': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Push-Up',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Push-Up+GIF',
    video: 'https://www.youtube.com/watch?v=IODxDxX7oi4'
  },
  'chest-fly': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Fly',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Chest+Fly+GIF',
    video: 'https://www.youtube.com/watch?v=eozdVDA78K0'
  },
  'overhead-press': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=OHP',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Overhead+Press+GIF',
    video: 'https://www.youtube.com/watch?v=M2rwvNhTOu0'
  },
  'arnold-press': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Arnold',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Arnold+Press+GIF',
    video: 'https://www.youtube.com/watch?v=6Z15_WdXmVw'
  },
  'landmine-press': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Landmine',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Landmine+Press+GIF',
    video: 'https://www.youtube.com/watch?v=kzbnHIDFEXA'
  },
  'incline-press': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Incline',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Incline+Press+GIF',
    video: 'https://www.youtube.com/watch?v=8iPEnn-ltC8'
  },
  'incline-fly': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Inc+Fly',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Incline+Fly+GIF',
    video: 'https://www.youtube.com/watch?v=idAvu2HvqSQ'
  },
  'cable-fly': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Cable',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Cable+Fly+GIF',
    video: 'https://www.youtube.com/watch?v=eQ_NBB6OBH4'
  },
  'tricep-pushdown': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Tricep',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Tricep+Pushdown+GIF',
    video: 'https://www.youtube.com/watch?v=2-LAMcpzODU'
  },
  'overhead-tricep-ext': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=OH+Ext',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Overhead+Extension+GIF',
    video: 'https://www.youtube.com/watch?v=YbX7Wd8jQ-Q'
  },
  'close-grip-pushup': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=CG+Push',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Close-Grip+Pushup+GIF',
    video: 'https://www.youtube.com/watch?v=2cdIRe5tcqI'
  },
  'plank': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Plank',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Plank+GIF',
    video: 'https://www.youtube.com/watch?v=ASdvN_XEl_c'
  },
  'mountain-climbers': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Mtn+Clmb',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Mountain+Climbers+GIF',
    video: 'https://www.youtube.com/watch?v=nmwgirgXLYM'
  },
  'ab-wheel': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Ab+Wheel',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Ab+Wheel+GIF',
    video: 'https://www.youtube.com/watch?v=qeqofno2lSM'
  },
  // Pull Day
  'cable-row': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Row',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Cable+Row+GIF',
    video: 'https://www.youtube.com/watch?v=GZbfZ033f74'
  },
  'dumbbell-row': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=DB+Row',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=DB+Row+GIF',
    video: 'https://www.youtube.com/watch?v=roCP6wCXPqo'
  },
  'barbell-row': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=BB+Row',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=BB+Row+GIF',
    video: 'https://www.youtube.com/watch?v=FWJR5Ve8bnQ'
  },
  'lat-pulldown': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Pulldown',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Lat+Pulldown+GIF',
    video: 'https://www.youtube.com/watch?v=CAwf7n6Luuc'
  },
  'pull-ups': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Pull-Up',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Pull-Up+GIF',
    video: 'https://www.youtube.com/watch?v=eGo4IYlbE5g'
  },
  'straight-arm-pulldown': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=SA+PD',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Straight+Arm+GIF',
    video: 'https://www.youtube.com/watch?v=kiuVA0gs3EI'
  },
  'face-pulls': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Face',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Face+Pulls+GIF',
    video: 'https://www.youtube.com/watch?v=rep-qVOkqgk'
  },
  'reverse-fly': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Rev+Fly',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Reverse+Fly+GIF',
    video: 'https://www.youtube.com/watch?v=ea-H-QB1ZNg'
  },
  'upright-row': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Upright',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Upright+Row+GIF',
    video: 'https://www.youtube.com/watch?v=TkRz-5gdT2M'
  },
  'bicep-curls': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Curls',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Bicep+Curls+GIF',
    video: 'https://www.youtube.com/watch?v=ykJmrZ5v0Oo'
  },
  'hammer-curls': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Hammer',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Hammer+Curls+GIF',
    video: 'https://www.youtube.com/watch?v=zC3nLlEvin4'
  },
  'cable-curls': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Cable',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Cable+Curls+GIF',
    video: 'https://www.youtube.com/watch?v=Jvj2wV0vOYU'
  },
  'dead-bug': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Bug',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Dead+Bug+GIF',
    video: 'https://www.youtube.com/watch?v=4XLEnwUr1d8'
  },
  'bird-dog': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Bird',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Bird+Dog+GIF',
    video: 'https://www.youtube.com/watch?v=wiFNA3sqjCA'
  },
  'hollow-body': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Hollow',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Hollow+Body+GIF',
    video: 'https://www.youtube.com/watch?v=LlDNef_Ztsc'
  },
  // Legs Day
  'goblet-squat': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Goblet',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Goblet+Squat+GIF',
    video: 'https://www.youtube.com/watch?v=MeIiIdhvXT4'
  },
  'back-squat': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=BB+Squat',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Back+Squat+GIF',
    video: 'https://www.youtube.com/watch?v=ultWZbUMPL8'
  },
  'leg-press': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Leg+Press',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Leg+Press+GIF',
    video: 'https://www.youtube.com/watch?v=IZxyjW7MPJQ'
  },
  'rdl': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=RDL',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=RDL+GIF',
    video: 'https://www.youtube.com/watch?v=2SHsk9AzdjA'
  },
  'leg-curl': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Leg+Curl',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Leg+Curl+GIF',
    video: 'https://www.youtube.com/watch?v=ELOCsoDSmrg'
  },
  'good-mornings': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=GM',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Good+Mornings+GIF',
    video: 'https://www.youtube.com/watch?v=YA-h3n9L4YU'
  },
  'bulgarian-split': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=BSS',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Bulgarian+Split+GIF',
    video: 'https://www.youtube.com/watch?v=2C-uNgKwPLE'
  },
  'walking-lunges': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Lunges',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Walking+Lunges+GIF',
    video: 'https://www.youtube.com/watch?v=L8fvypPrzzs'
  },
  'step-ups': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Step-Up',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Step-Ups+GIF',
    video: 'https://www.youtube.com/watch?v=dQqApCGd5Ss'
  },
  'calf-raises': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Calves',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Calf+Raise+GIF',
    video: 'https://www.youtube.com/watch?v=gwLzBJYoWlI'
  },
  'seated-calf': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Seated',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Seated+Calf+GIF',
    video: 'https://www.youtube.com/watch?v=JbyjNymZOt0'
  },
  'single-calf': {
    img: 'https://via.placeholder.com/80x80/4a6fd6/ffffff?text=Single',
    imgFull: 'https://via.placeholder.com/400x400/4a6fd6/ffffff?text=Single+Leg+GIF',
    video: 'https://www.youtube.com/watch?v=gwLzBJYoWlI'
  },
  'side-plank': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Side',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Side+Plank+GIF',
    video: 'https://www.youtube.com/watch?v=K2VljzCC16g'
  },
  'pallof-press': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Pallof',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Pallof+Press+GIF',
    video: 'https://www.youtube.com/watch?v=AH_QZLm_0-s'
  },
  'russian-twists': {
    img: 'https://via.placeholder.com/80x80/d64545/ffffff?text=Russian',
    imgFull: 'https://via.placeholder.com/400x400/d64545/ffffff?text=Russian+Twists+GIF',
    video: 'https://www.youtube.com/watch?v=wkD8rjkodUI'
  }
};

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  document.getElementById('installPrompt').classList.add('show');
});

function installApp() {
  const promptEl = document.getElementById('installPrompt');
  promptEl.classList.remove('show');
  
  if (deferredPrompt) {
    deferredPrompt.prompt();
    deferredPrompt.userChoice.then((choiceResult) => {
      deferredPrompt = null;
    });
  }
}

function hideInstallPrompt() {
  document.getElementById('installPrompt').classList.remove('show');
}

if ('serviceWorker' in navigator) {
  window.addEventListener('load', () => {
    navigator.serviceWorker.register('sw.js').catch(() => {
      console.log('Service worker registration failed');
    });
  });
}


document.addEventListener('DOMContentLoaded', () => {
  const STORAGE_KEY = 'workoutTrackerState';
  const STATE_VERSION = 1;
  const PROGRAM_VERSION = '2026-01-v2.1';

  // In-memory working state (persisted to localStorage)
  let state = loadState();

  assignStableIds();
  applyMediaFromKeys();
  applyStateToUI();

  // ---------- Public API ----------
  window.showDay = function(dayId, tabBtn) {
    const day = document.getElementById(dayId);
    if (!day || !tabBtn) return;
    document.querySelectorAll('.day').forEach(d => d.classList.remove('active'));
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    day.classList.add('active');
    tabBtn.classList.add('active');
  };

  window.clearChecks = function(dayId) {
    const container = document.getElementById(dayId);
    if (!container) return;

    container.querySelectorAll('input[type="checkbox"]').forEach(c => {
      c.checked = false;
      const checkId = c.dataset.checkId;
      if (checkId) delete state.checkmarks[checkId];
    });

    persistState();
  };

  window.expandSVG = function(el) {
    const overlay = document.getElementById('svgOverlay');
    const container = document.getElementById('overlayContent');
    if (!overlay || !container || !el) return;
    container.innerHTML = el.innerHTML;
    overlay.classList.add('active');
  };

  window.expandImage = function(event, url) {
    event.stopPropagation();
    const overlay = document.getElementById('svgOverlay');
    const container = document.getElementById('overlayContent');
    if (!overlay || !container) return;
    container.innerHTML = `<img src="${url}" alt="Exercise demonstration" />`;
    overlay.classList.add('active');
  };

  window.closeOverlay = function() {
    const overlay = document.getElementById('svgOverlay');
    if (overlay) overlay.classList.remove('active');
  };

  window.toggleVariants = function(btn) {
    const list = btn.nextElementSibling;
    if (!list) return;
    list.classList.toggle('active');
  };

  window.selectVariant = function(option) {
    const container = option.closest('.exercise-variants');
    const exerciseItem = option.closest('li');
    if (!container || !exerciseItem) return;

    const nameEl = exerciseItem.querySelector('.exercise-name');
    const instructionsEl = exerciseItem.querySelector('.instructions');
    const videoLink = exerciseItem.querySelector('.video-link');
    const visualEl = exerciseItem.querySelector('.exercise-visual');
    const imgEl = visualEl ? visualEl.querySelector('img') : null;

    const mediaKey = option.dataset.mediaKey;
    const media = mediaKey ? exerciseMedia[mediaKey] : null;

    if (nameEl) nameEl.textContent = option.dataset.name || nameEl.textContent;
    if (instructionsEl && option.dataset.instructions) {
      // Preserve existing display style while avoiding brittle parsing
      const normalized = option.dataset.instructions
        .split('|')
        .map(s => s.trim())
        .filter(Boolean)
        .map(line => {
          const idx = line.indexOf(':');
          if (idx === -1) return line;
          const k = line.slice(0, idx).trim();
          const v = line.slice(idx + 1).trim();
          return `<strong>${k}:</strong> ${v}`;
        })
        .join('<br>');
      instructionsEl.innerHTML = normalized;
    }

    // Update media key on the exercise (single source of truth)
    if (visualEl && mediaKey) visualEl.dataset.mediaKey = mediaKey;
    if (videoLink && mediaKey) videoLink.dataset.mediaKey = mediaKey;

    if (media) {
      if (videoLink && media.video) videoLink.href = media.video;
      if (imgEl && media.img) {
        imgEl.src = media.img;
        imgEl.alt = option.dataset.name || imgEl.alt;
      }
      if (visualEl && media.imgFull) {
        visualEl.onclick = (e) => expandImage(e, media.imgFull);
      }
    }

    // Persist selection by stable exercise id
    const exerciseId = exerciseItem.dataset.exerciseId;
    if (exerciseId && mediaKey) {
      state.selections[exerciseId] = mediaKey;
      persistState();
    }

    container.classList.remove('active');
    container.querySelectorAll('.variant-option').forEach(v => v.classList.remove('selected'));
    option.classList.add('selected');
  };

  // ---------- Event Wiring ----------
  document.addEventListener('change', function(e) {
    if (e.target && e.target.type === 'checkbox') {
      const checkId = e.target.dataset.checkId;
      if (!checkId) return;
      if (e.target.checked) state.checkmarks[checkId] = true;
      else delete state.checkmarks[checkId];
      persistState();
    }
  });

  // ---------- State + Media ----------
  function defaultState() {
    return {
      stateVersion: STATE_VERSION,
      programVersion: PROGRAM_VERSION,
      checkmarks: {},
      selections: {}
    };
  }

  function loadState() {
    try {
      const raw = localStorage.getItem(STORAGE_KEY);
      if (!raw) return defaultState();
      const parsed = JSON.parse(raw);

      if (!parsed || typeof parsed !== 'object') return defaultState();
      if (parsed.stateVersion !== STATE_VERSION) return defaultState();
      if (parsed.programVersion !== PROGRAM_VERSION) return defaultState();

      return {
        stateVersion: STATE_VERSION,
        programVersion: PROGRAM_VERSION,
        checkmarks: parsed.checkmarks && typeof parsed.checkmarks === 'object' ? parsed.checkmarks : {},
        selections: parsed.selections && typeof parsed.selections === 'object' ? parsed.selections : {}
      };
    } catch (_) {
      return defaultState();
    }
  }

  function persistState() {
    try {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    } catch (_) {
      // Ignore storage errors (private mode, quota, etc.)
    }
  }

  function assignStableIds() {
    document.querySelectorAll('.day').forEach(day => {
      const dayId = day.id || 'day';
      let warmIdx = 0;
      let coolIdx = 0;
      let miscIdx = 0;

      day.querySelectorAll('li').forEach(li => {
        const checkbox = li.querySelector('input[type="checkbox"]');
        if (!checkbox) return;

        const section = li.closest('.section');
        const sectionIsWarm = section && section.classList.contains('warmup');
        const sectionIsCool = section && section.classList.contains('cooldown');

        // Strength/core exercises: use the media key as stable identity when possible
        const visual = li.querySelector('.exercise-visual');
        const mediaKey = visual && visual.dataset.mediaKey ? visual.dataset.mediaKey : null;

        let itemId;
        if (li.classList.contains('exercise-li')) {
          // reserved if you later add a class
          itemId = `${dayId}-ex-${mediaKey || (miscIdx++)}`;
        } else if (visual && li.querySelector('.exercise-name')) {
          itemId = `${dayId}-ex-${mediaKey || (miscIdx++)}`;
        } else if (sectionIsWarm) {
          itemId = `${dayId}-warmup-${warmIdx++}`;
        } else if (sectionIsCool) {
          itemId = `${dayId}-cooldown-${coolIdx++}`;
        } else {
          itemId = `${dayId}-item-${miscIdx++}`;
        }

        if (!li.dataset.exerciseId && (visual && li.querySelector('.exercise-name'))) {
          li.dataset.exerciseId = itemId;
        }

        checkbox.dataset.checkId = itemId;

        // Tag variants with stable ids (variantId = mediaKey)
        const variants = li.querySelectorAll('.variant-option');
        variants.forEach(v => {
          if (v.dataset.mediaKey) {
            v.dataset.variantId = v.dataset.mediaKey;
            if (li.dataset.exerciseId) v.dataset.exerciseId = li.dataset.exerciseId;
          }
        });
      });
    });
  }

  function applyMediaFromKeys() {
    // Initialize all exercise visuals from centralized media
    document.querySelectorAll('.exercise-visual').forEach(visual => {
      const mediaKey = visual.dataset.mediaKey;
      if (!mediaKey || !exerciseMedia[mediaKey]) return;

      const media = exerciseMedia[mediaKey];
      const img = visual.querySelector('img');
      if (img && media.img) img.src = media.img;
      if (media.imgFull) {
        visual.onclick = (e) => expandImage(e, media.imgFull);
      }
    });

    // Initialize all video links from centralized media
    document.querySelectorAll('.video-link').forEach(link => {
      const mediaKey = link.dataset.mediaKey;
      if (!mediaKey || !exerciseMedia[mediaKey] || !exerciseMedia[mediaKey].video) return;
      link.href = exerciseMedia[mediaKey].video;
    });
  }

  function applyStateToUI() {
    // Apply checkmarks
    document.querySelectorAll('input[type="checkbox"]').forEach(c => {
      const checkId = c.dataset.checkId;
      if (!checkId) return;
      c.checked = !!state.checkmarks[checkId];
    });

    // Apply saved variant selections
    document.querySelectorAll('li[data-exercise-id], li[data-exercise-id=""]').forEach(li => {
      const exerciseId = li.dataset.exerciseId;
      if (!exerciseId) return;
      const selectedKey = state.selections[exerciseId];
      if (!selectedKey) return;

      const option = li.querySelector(`.variant-option[data-media-key="${CSS.escape(selectedKey)}"]`);
      if (option) {
        // Update selection styling + UI media
        window.selectVariant(option);
      }
    });
  }
});

</script>

</body>
</html>
